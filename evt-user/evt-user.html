<link rel="import" href="evt-user-card.html">

<dom-module id="evt-user">
  <template>
    <div id="container"></div>
  </template>
  <script>
    EvtElements.User = Polymer({
      is: 'evt-user',

      MODES: {
        'card': 'UserCard',
        'full': 'UserFull'
      },

      properties: {
        mode: {
          type: String,
          observer: '_modeChanged',
          value: 'card'
        },

        user: {
          type: Object,
          observer: '_modeChanged'
        }
      },

      behaviors: [
        EvtElements.behaviors.clear,
        EvtElements.behaviors.thng
      ],

      factoryImpl: function(config) {
        this.user = config.user;
        this.mode = config.mode || 'card';
      },

      _modeChanged: function() {
        this.setMode(this.mode);
      },

      setMode: function(mode) {
        if (this.MODES[mode]) {
          var thngEl = new EvtElements[this.MODES[mode]]({
            user: this.user
          });

          this.clear('container');
          this.$.container.appendChild(thngEl);
        }
      }
    });
  </script>
</dom-module>
