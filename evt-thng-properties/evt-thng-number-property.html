<link rel="import" href="../../paper-slider/paper-slider.html">

<dom-module id="evt-thng-number-property">
  <template>
    <section class="thng-property">
      <div class="thng-property__details flex">
        <div class="thng-property__name">{{_get(property, 'name')}}</div>
        <div class="thng-property__unit" hidden$="!_has(property, 'meta.unit')">{{_get(property, 'meta.unit', 'raw')}}</div>

        <paper-slider id="editor"
                      value="{{_numberify(property.value)}}"
                      min="{{property.meta.minValue}}"
                      max="{{property.meta.maxValue}}"
                      pin="true"
                      editable
        ></paper-slider>
      </div>
    </section>
  </template>
  <script>
    EvtElements.ThngNumberProperty = Polymer({
      is: 'evt-thng-number-property',

      behaviors: [
        EvtElements.behaviors.access,
        EvtElements.behaviors.property.number
      ],

      properties: {
        property: {
          type: Object
        }
      },

      factoryImpl: function (config) {
        this.thng = config.thng;
        this.property = config.property;
      },

      ready: function () {
        this.$.editor.animationConfig = {
          'entry': [{
            name: 'scale-up-animation',
            node: this.$.editor
          }],
          'exit': [{
            name: 'slide-up-animation',
            node: this.$.editor
          }, {
            name: 'fade-out-animation',
            node: this.$.editor
          }]
        };
      },

      observers: [
        '_propertyValueChanged(property.value)',
        '_propertyMetaChanged(property.meta)'
      ],

      _propertyValueChanged: function (value) {

      },

      _propertyMetaChanged: function(meta) {
        this.$.editor.min = meta.minValue;
        this.$.editor.max = meta.maxValue;
      }
    });
  </script>
</dom-module>
